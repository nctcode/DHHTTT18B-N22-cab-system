{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"info","message":"‚úÖ PostgreSQL connected successfully","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'reviews'","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): SELECT pk.constraint_type as \"Constraint\",c.column_name as \"Field\", c.column_default as \"Default\",c.is_nullable as \"Null\", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as \"Type\", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS \"special\", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS \"Comment\" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'reviews' AND c.table_schema = 'public'","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'reviews' AND tc.table_catalog = 'cab_booking_auth'","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"error","message":"‚ùå Unable to connect to PostgreSQL: column \"ride_id\" cannot be cast automatically to type uuid","name":"SequelizeDatabaseError","original":{"code":"42804","file":"tablecmds.c","hint":"You might need to specify \"USING ride_id::uuid\".","length":179,"line":"14507","name":"error","routine":"ATPrepAlterColumnType","severity":"ERROR","sql":"ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;"},"parameters":{},"parent":{"code":"42804","file":"tablecmds.c","hint":"You might need to specify \"USING ride_id::uuid\".","length":179,"line":"14507","name":"error","routine":"ATPrepAlterColumnType","severity":"ERROR","sql":"ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;"},"service":"review-service","sql":"ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;","stack":"Error\n    at Query.run (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async Review.sync (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/model.js:984:11)\n    at async Sequelize.sync (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async connectDB (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/src/config/database.js:37:7)\n    at async startServer (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/src/server.js:11:5)","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Database URL: postgresql://postgres:****@localhost:5432/cab_booking_reviews","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"‚úÖ PostgreSQL connected successfully","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üìä Database connection ready","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_type LIKE '%TABLE' AND table_name != 'spatial_ref_sys';","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"warn","message":"‚ö†Ô∏è Reviews table does not exist. Run: npm run seed","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"‚úÖ Database connected successfully","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üöÄ Review Service running on port 3006","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üìö API Documentation: http://localhost:3006/api-docs","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üè• Health check: http://localhost:3006/health","service":"review-service","timestamp":"2026-01-26 18:41:38"}
